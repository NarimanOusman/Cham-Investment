{% extends 'base.html' %}

{% load static %}

{% block title %}Premium Cattle Export | Home{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<main>
  <!-- VIDEO HERO -->
  <section class="video-section" id="hero">
    <video id="heroVideo" autoplay muted playsinline loop preload="auto">
      <source src="{% static 'images/cattle-video.mp4' %}" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <button id="playOverlay" class="play-overlay" aria-hidden="true" title="Play video with sound">
      <i class="fas fa-play"></i>
      <span>Play</span>
    </button>

    <button id="muteToggle" class="mute-toggle" aria-pressed="true" title="Mute/unmute video">
      <i class="fas fa-volume-mute"></i>
    </button>

    <button id="pauseBtn" class="pause-video-btn" aria-label="Pause video">
      <i class="fas fa-pause"></i>
    </button>
  </section>

  <div class="video-text container">
    <h1>Exporting Premium Cattle from Africa to the World</h1>
    <p>We provide quality from the beginning.</p>
  </div>

  <section class="benefits">
    <div class="container">
      <h2>Why Partner With Us?</h2>
      <div class="benefits-grid" id="benefitsGrid">
        <article class="benefit-card alt-left">
          <div class="benefit-icon"><i class="fas fa-cow"></i></div>
          <h3>Extensive Experience</h3>
          <p>Decades of expertise in cattle breeding and export logistics across Africa.</p>
        </article>
        <article class="benefit-card alt-right">
          <div class="benefit-icon"><i class="fas fa-award"></i></div>
          <h3>High Quality</h3>
          <p>Only the healthiest, genetically superior cattle meet our strict standards.</p>
        </article>
        <article class="benefit-card alt-left">
          <div class="benefit-icon"><i class="fas fa-headset"></i></div>
          <h3>Excellent Service</h3>
          <p>Dedicated support from inquiry to delivery — we’re with you every step.</p>
        </article>
      </div>
    </div>
  </section>

  <section class="why-choose">
    <div class="container">
      <div class="why-content">
        <div class="why-image">
          <img src="{% static 'images/doc.jpg' %}" alt="Healthy cattle">
        </div>
        <div class="why-text">
          <h2>Why Choose Us?</h2>
          <p>We care about every aspect of cattle farming - from nutrition to health care - to ensure the health and well-being of our cattle. Our farms follow sustainable, ethical practices that prioritize animal welfare and environmental responsibility.</p>
          <a href="{% url 'about' %}" class="btn">Learn More</a>
        </div>
      </div>
    </div>
  </section>

  <section class="stats">
    <div class="container">
      <h2>Our Global Impact</h2>
      <div class="stats-grid">
        <div class="stat-item"><h3>500+</h3><p>Cattle Exported</p></div>
        <div class="stat-item"><h3>15+</h3><p>Countries Served</p></div>
        <div class="stat-item"><h3>98%</h3><p>Client Satisfaction</p></div>
      </div>
    </div>
  </section>

  <section class="final-cta container" id="contact">
    <h2 class="htwo">Ready to source premium cattle?</h2>
    <p>Let’s talk about your needs and how we can deliver exceptional livestock to your doorstep.</p>
    <a href="#contact" class="btn">Contact Us Today</a>
  </section>
</main>

<footer class="modern-footer">
  <div class="footer-container">
    <div class="footer-col">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'about' %}">About Us</a></li>
        <li><a href="{% url 'services' %}">Services</a></li>
        <li><a href="{% url 'home' %}#contact">Contact</a></li>
      </ul>
    </div>

    <div class="footer-col">
      <h4>Location</h4>
      <div class="locations-wrap">
        <span class="location-label" id="footerLocationLabel">Hover / Tap to see countries</span>
        <div class="locations-list" id="footerLocations" aria-hidden="true">
          <div>Rwanda</div>
          <div>Uganda</div>
          <div>Sudan</div>
          <div>Kenya</div>
          <div>Indonesia</div>
          <div>Malaysia</div>
          <div>Vietnam</div>
        </div>
      </div>
    </div>

    <div class="footer-col">
      <h4>Contact</h4> <!-- ✅ Removed duplicate id="contact" -->
      <div class="contact-info">
        <p><i class="fas fa-envelope"></i> <a href="mailto:chaminvestementsco.ltd@gmail.com">chaminvestementsco.ltd@gmail.com</a></p>
        <p><i class="fab fa-whatsapp"></i> <a href="https://wa.me/250794444444" target="_blank">+250 794 444 444</a></p>
        <p><i class="fas fa-phone"></i> <a href="tel:+628588883344">+62 858 888 3344</a></p>
        <p><i class="fas fa-phone"></i> <a href="tel:+250791222222">+250 791 222 222</a></p>
      </div>
    </div>
  </div>

  <div class="footer-bottom">
    <p>&copy; 2025 Cham Investment Co. Ltd. All rights reserved.</p>
  </div>
</footer>
{% endblock %}

{% block extra_js %}
<script>
  // VIDEO: autoplay, mute, play overlay
  (function() {
    const video = document.getElementById('heroVideo');
    const muteToggle = document.getElementById('muteToggle');
    const playOverlay = document.getElementById('playOverlay');
    const pauseBtn = document.getElementById('pauseBtn');

    function showPlayOverlay() {
      if (playOverlay) {
        playOverlay.style.display = 'flex';
        playOverlay.setAttribute('aria-hidden', 'false');
      }
    }
    function hidePlayOverlay() {
      if (playOverlay) {
        playOverlay.style.display = 'none';
        playOverlay.setAttribute('aria-hidden', 'true');
      }
    }

    playOverlay?.addEventListener('click', async () => {
      try {
        video.muted = false;
        await video.play();
        hidePlayOverlay();
      } catch (err) {
        video.muted = true;
        await video.play().catch(() => {});
        hidePlayOverlay();
      }
    });

    if (muteToggle) {
      const icon = muteToggle.querySelector('i');
      muteToggle.addEventListener('click', () => {
        video.muted = !video.muted;
        muteToggle.setAttribute('aria-pressed', String(video.muted));
        if (icon) {
          icon.className = video.muted ? 'fas fa-volume-mute' : 'fas fa-volume-up';
        }
        if (!video.muted) {
          video.play().catch(() => {});
          hidePlayOverlay();
        }
      });

      let hideTimer;
      function scheduleHide() {
        clearTimeout(hideTimer);
        muteToggle.classList.add('visible');
        hideTimer = setTimeout(() => muteToggle.classList.remove('visible'), 3000);
      }
      const videoSection = document.querySelector('.video-section');
      videoSection?.addEventListener('mousemove', scheduleHide);
      videoSection?.addEventListener('touchstart', scheduleHide);
      scheduleHide();
    }

    // Force play on load
    if (video) {
      video.muted = true;
      video.play().catch(() => showPlayOverlay());
    }
  })();

  // VIDEO: Pause on scroll away
  (function() {
    const video = document.getElementById('heroVideo');
    const videoSection = document.querySelector('.video-section');
    const pauseBtn = document.getElementById('pauseBtn');
    if (!video || !videoSection || !pauseBtn) return;

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting && !video.paused) {
          video.pause();
          pauseBtn.innerHTML = '<i class="fas fa-play"></i>';
        }
      });
    }, { threshold: 0.1 });
    observer.observe(videoSection);
  })();

  // CARDS animation
  (function() {
    const cards = document.querySelectorAll('.benefit-card');
    if (!cards.length) return;

    cards.forEach((c, i) => {
      c.classList.remove('show','alt-left','alt-right');
      c.classList.add(i % 2 === 0 ? 'alt-left' : 'alt-right');
    });

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const el = entry.target;
        const idx = Array.from(cards).indexOf(el);
        if (entry.isIntersecting) {
          setTimeout(() => el.classList.add('show'), idx * 300);
        } else {
          el.classList.remove('show');
        }
      });
    }, { threshold: 0.25 });

    cards.forEach(c => observer.observe(c));
  })();

  // FOOTER LOCATIONS
  (function() {
    const footerLabel = document.getElementById('footerLocationLabel');
    const footerLocations = document.getElementById('footerLocations');
    const parent = footerLabel.closest('.locations-wrap');

    if (!footerLabel || !footerLocations || !parent) return;

    parent.addEventListener('mouseenter', () => {
      parent.classList.add('hover');
      footerLocations.setAttribute('aria-hidden','false');
    });
    parent.addEventListener('mouseleave', () => {
      parent.classList.remove('hover');
      footerLocations.setAttribute('aria-hidden','true');
    });

    footerLabel.addEventListener('click', (e) => {
      e.preventDefault();
      const isOpen = parent.classList.toggle('hover');
      footerLocations.setAttribute('aria-hidden', String(!isOpen));
    });

    document.addEventListener('click', (e) => {
      if (!parent.contains(e.target)) {
        parent.classList.remove('hover');
        footerLocations.setAttribute('aria-hidden','true');
      }
    });
  })();
</script>
{% endblock %}

